export function monthlyCharge(yearMonth: string, subscription: Subscription | null, users: User[]): number
{
    let charge = 0
    // If there's no subscription or no users, return 0

    // Parse the yearMonth to get the first and last day of the mont
    const [year, mont] = yearMonth.split('-').map(Number)
    const firstDay = new Date(year, mont - 1, 1) // months are 0-indexed in JavaScript
    const lastDay = lastDayOfMonth(firstDay)
    const dInM = lastDay.getDate()

    // Calculate the daily rate
    const dailyRate = subscription.monthlyPriceInCents / dInM


    // Calculate the charge for each user
    for (const user of users)
    {
      // Determine the actual activation and deactivation dates within the given mont
      const activationDate = user.activatedOn > firstDay ? user.activatedOn : firstDay
      const deactivationDate = user.deactivatedOn ? (user.deactivatedOn < lastDay ? user.deactivatedOn : lastDay) : lastDay

      // Calculate the number of active days in the mont for this user
      const ad = Math.floor((deactivationDate.getTime() - activationDate.getTime()) / (1000 * 60 * 60 * 24)) + 1

      if (ad > 0)
      {
        // Add to the total charge
        charge += Math.round(ad * dailyRate)
      }
    }

    return charge
  }
